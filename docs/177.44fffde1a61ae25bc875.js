(self.webpackChunkwachatpro_webclient=self.webpackChunkwachatpro_webclient||[]).push([[177],{277:(t,e,r)=>{"use strict";r.d(e,{P:()=>c});var n=r(39895),o=r(79498),s=r(37716);const i=[{path:"",children:[{path:":qrid",component:o.K},{path:"**",redirectTo:"/error-404"}]}];let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[n.Bz.forChild(i)],n.Bz]}),t})()},79498:(t,e,r)=>{"use strict";r.d(e,{K:()=>h});var n=r(16304),o=r(58665),s=r(37716),i=r(42448),c=r(39895),a=r(38583);function l(t,e){1&t&&(s.O4$(),s.TgZ(0,"svg",8),s._UZ(1,"circle",9),s._UZ(2,"path",10),s.qZA())}function u(t,e){1&t&&s._UZ(0,"canvas",11)}const d=function(){return["/"]};let h=(()=>{class t{constructor(t,e,r){this.core=t,this.route=e,this.router=r,this.Busy=!0,this.route.params.subscribe(t=>{t.qrid&&(this.QRID=t.qrid)})}ngOnInit(){this.core.setTitle("Scan QRCode"),this.watchQR()}ngOnDestroy(){this.qrSub&&this.qrSub.unsubscribe()}watchQR(){var t=this;this.qrSub=this.core.FS.collection("_QRCODE",t=>t.where("qrid","==",this.QRID).limit(1)).snapshotChanges().subscribe(function(){var e=(0,n.Z)(function*(e){const r=e.map(t=>t.payload.doc.data());if(r.length>0){const e=r[0];t.Busy=!1,t.drawQR(e)}else t.qrSub&&t.qrSub.unsubscribe(),t.router.navigate(["/instance"])});return function(t){return e.apply(this,arguments)}}())}drawQR(t){t.data&&(clearTimeout(this.delayDraw),this.delayDraw=setTimeout(()=>{let e=$("qrcode").width(),r=document.getElementById("qrcode");this.qrcode=new o.Z({canvas:r,content:t.data,width:e,logo:{src:"/assets/icons/logo-whatsapp.svg"},nodeQrCodeOptions:{errorCorrectionLevel:"M"}}),this.qrcode.toCanvas().then(()=>{})},100))}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(i.Q),s.Y36(c.gz),s.Y36(c.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-global-qr"]],decls:11,vars:4,consts:[[1,"absolute","inset-0"],[1,"flex","flex-col","flex-auto","items-center","justify-center","h-full","p-6","sm:p-10"],[1,"text-2xl","font-extrabold","tracking-tight","leading-tight","md:leading-none","text-center"],[1,"mt-1","font-medium","tracking-tight","text-center","text-secondary"],[1,"mt-12","h-96","w-96","rounded-2xl","text-center","shadow-xl","bg-white"],["class","animate-spin h-80 w-80 mt-8 text-primary m-auto","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],["id","qrcode","class","p-0 rounded-xl w-full h-full",4,"ngIf"],[1,"mt-12","font-medium","underline","text-primary-500",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-80","w-80","mt-8","text-primary","m-auto"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["id","qrcode",1,"p-0","rounded-xl","w-full","h-full"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._uU(3," Scan QRCode "),s.qZA(),s.TgZ(4,"div",3),s._uU(5," Please Scan the QRCode to Connect WAChat Professional "),s.qZA(),s.TgZ(6,"div",4),s.YNc(7,l,3,0,"svg",5),s.YNc(8,u,1,0,"canvas",6),s.qZA(),s.TgZ(9,"a",7),s._uU(10," Back to Home "),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(7),s.Q6J("ngIf",e.Busy),s.xp6(1),s.Q6J("ngIf",!e.Busy),s.xp6(1),s.Q6J("routerLink",s.DdM(3,d)))},directives:[a.O5,c.yS],styles:[""]}),t})()},1177:(t,e,r)=>{"use strict";r.r(e),r.d(e,{GlobalQRModule:()=>a});var n=r(38583),o=r(277),s=r(44466),i=r(49616),c=r(37716);r(79498);let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,o.P,s.m,i.m]]}),t})()}}]);