(self.webpackChunkwachatpro_webclient=self.webpackChunkwachatpro_webclient||[]).push([[853],{58790:(t,e,o)=>{"use strict";o.d(e,{p:()=>T});var i=o(3679),n=o(14485),r=o(28288),a=o(37716),s=o(88951),l=o(42448),c=o(38583),d=o(98295),m=o(83166),u=o(51095),g=o(98214),p=o(76627),f=o(4885);const h=["changePasswordNgForm"];function x(t,e){if(1&t&&(a.TgZ(0,"fuse-alert",21),a._uU(1),a.qZA()),2&t){const t=a.oxw();a.Q6J("appearance","outline")("showIcon",!0)("type",t.alert.type)("@shake","error"===t.alert.type),a.xp6(1),a.hij(" ",t.alert.message," ")}}function w(t,e){1&t&&a._UZ(0,"mat-icon",22),2&t&&a.Q6J("svgIcon","heroicons_solid:eye")}function b(t,e){1&t&&a._UZ(0,"mat-icon",22),2&t&&a.Q6J("svgIcon","heroicons_solid:eye-off")}function Z(t,e){1&t&&a._UZ(0,"mat-icon",22),2&t&&a.Q6J("svgIcon","heroicons_solid:eye")}function y(t,e){1&t&&a._UZ(0,"mat-icon",22),2&t&&a.Q6J("svgIcon","heroicons_solid:eye-off")}function C(t,e){1&t&&a._UZ(0,"mat-icon",22),2&t&&a.Q6J("svgIcon","heroicons_solid:eye")}function v(t,e){1&t&&a._UZ(0,"mat-icon",22),2&t&&a.Q6J("svgIcon","heroicons_solid:eye-off")}function S(t,e){1&t&&(a.TgZ(0,"mat-error"),a._uU(1," Password confirmation is required "),a.qZA())}function A(t,e){1&t&&(a.TgZ(0,"mat-error"),a._uU(1," Passwords must match "),a.qZA())}function k(t,e){1&t&&(a.TgZ(0,"span"),a._uU(1," Change Password "),a.qZA())}function I(t,e){1&t&&a._UZ(0,"mat-progress-spinner",23),2&t&&a.Q6J("diameter",24)("mode","indeterminate")}let T=(()=>{class t{constructor(t,e,o){this._authService=t,this._formBuilder=e,this.core=o,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.core.setTitle("Change Password"),this.changePasswordForm=this._formBuilder.group({currentPassword:["",i.kI.required],password:["",i.kI.required],passwordConfirm:["",i.kI.required]},{validators:n.a.mustMatch("password","passwordConfirm")}),setTimeout(()=>{$("#current_password").focus()},500)}changePassword(){this.changePasswordForm.invalid||(this.changePasswordForm.disable(),this.showAlert=!1,this.core.Do("e/_system/cpass",this.changePasswordForm.value).subscribe(t=>{if(1==t.status)this.alert={type:"success",message:t.message},this.showAlert=!0,setTimeout(()=>{this.core.ShowLoader(),setTimeout(()=>{this.core.HideLoader(),this.core.logout()},3e3)},500);else{var e=t.error_msg;e||(e="Undefined Error!"),this.alert={type:"error",message:e},this.changePasswordForm.enable(),this.showAlert=!0}},t=>{this.changePasswordForm.enable(),console.error("Change Password",t)}))}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.e),a.Y36(i.qu),a.Y36(l.Q))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-change-password"]],viewQuery:function(t,e){if(1&t&&a.Gf(h,5),2&t){let t;a.iGM(t=a.CRH())&&(e.changePasswordNgForm=t.first)}},decls:45,vars:17,consts:[[1,"flex","flex-col","flex-auto","items-center","sm:justify-center","min-w-0"],[1,"w-full","sm:w-auto","py-8","px-4","sm:p-12","sm:rounded-2xl","sm:shadow","sm:bg-card"],[1,"w-full","max-w-90","md:min-w-140","sm:w-90","mx-auto","sm:mx-0"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-0.5","font-medium"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["changePasswordNgForm","ngForm"],[1,"w-full"],["id","current_password","matInput","","type","password",3,"formControlName"],["currentPasswordField",""],["tabindex","-1","mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["id","password-confirm","matInput","","type","password",3,"formControlName"],["passwordConfirmField",""],[4,"ngIf"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-3",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","text-md","font-medium","text-secondary"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"icon-size-5",3,"svgIcon"],[3,"diameter","mode"]],template:function(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a._uU(4,"Change Password"),a.qZA(),a.TgZ(5,"div",4),a._uU(6,"Change your password to ensure the maximum protection of your account."),a.qZA(),a.YNc(7,x,2,5,"fuse-alert",5),a.TgZ(8,"form",6,7),a.TgZ(10,"mat-form-field",8),a.TgZ(11,"mat-label"),a._uU(12,"Current Password"),a.qZA(),a._UZ(13,"input",9,10),a.TgZ(15,"button",11),a.NdJ("click",function(){a.CHM(t);const e=a.MAs(14);return e.type="password"===e.type?"text":"password"}),a.YNc(16,w,1,1,"mat-icon",12),a.YNc(17,b,1,1,"mat-icon",12),a.qZA(),a.TgZ(18,"mat-error"),a._uU(19," Current Password is required "),a.qZA(),a.qZA(),a._UZ(20,"hr"),a.TgZ(21,"mat-form-field",8),a.TgZ(22,"mat-label"),a._uU(23,"Password"),a.qZA(),a._UZ(24,"input",13,14),a.TgZ(26,"button",11),a.NdJ("click",function(){a.CHM(t);const e=a.MAs(25);return e.type="password"===e.type?"text":"password"}),a.YNc(27,Z,1,1,"mat-icon",12),a.YNc(28,y,1,1,"mat-icon",12),a.qZA(),a.TgZ(29,"mat-error"),a._uU(30," Password is required "),a.qZA(),a.qZA(),a.TgZ(31,"mat-form-field",8),a.TgZ(32,"mat-label"),a._uU(33,"Password (Confirm)"),a.qZA(),a._UZ(34,"input",15,16),a.TgZ(36,"button",11),a.NdJ("click",function(){a.CHM(t);const e=a.MAs(35);return e.type="password"===e.type?"text":"password"}),a.YNc(37,C,1,1,"mat-icon",12),a.YNc(38,v,1,1,"mat-icon",12),a.qZA(),a.YNc(39,S,2,0,"mat-error",17),a.YNc(40,A,2,0,"mat-error",17),a.qZA(),a.TgZ(41,"button",18),a.NdJ("click",function(){return e.changePassword()}),a.YNc(42,k,2,0,"span",17),a.YNc(43,I,1,2,"mat-progress-spinner",19),a.qZA(),a._UZ(44,"div",20),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=a.MAs(14),o=a.MAs(25),i=a.MAs(35);a.xp6(7),a.Q6J("ngIf",e.showAlert),a.xp6(1),a.Q6J("formGroup",e.changePasswordForm),a.xp6(5),a.Q6J("formControlName","currentPassword"),a.xp6(3),a.Q6J("ngIf","password"===t.type),a.xp6(1),a.Q6J("ngIf","text"===t.type),a.xp6(7),a.Q6J("formControlName","password"),a.xp6(3),a.Q6J("ngIf","password"===o.type),a.xp6(1),a.Q6J("ngIf","text"===o.type),a.xp6(6),a.Q6J("formControlName","passwordConfirm"),a.xp6(3),a.Q6J("ngIf","password"===i.type),a.xp6(1),a.Q6J("ngIf","text"===i.type),a.xp6(1),a.Q6J("ngIf",e.changePasswordForm.get("passwordConfirm").hasError("required")),a.xp6(1),a.Q6J("ngIf",e.changePasswordForm.get("passwordConfirm").hasError("mustMatch")),a.xp6(1),a.Q6J("color","primary")("disabled",e.changePasswordForm.disabled),a.xp6(1),a.Q6J("ngIf",!e.changePasswordForm.disabled),a.xp6(1),a.Q6J("ngIf",e.changePasswordForm.disabled)}},directives:[c.O5,i._Y,i.JL,i.sg,d.KE,d.hX,m.Nt,i.Fj,i.JJ,i.u,u.lW,d.R9,d.TO,g.W,p.Hw,f.Ou],styles:[""],data:{animation:r.L}}),t})()},47694:(t,e,o)=>{"use strict";o.d(e,{K:()=>S});var i=o(37716),n=o(42448),r=o(22238),a=o(3679),s=o(77310),l=o(12522),c=o(35618),d=o(38583),m=o(51095),u=o(76627),g=o(12178),p=o(98295),f=o(83166),h=o(4885);function x(t,e){1&t&&(i.TgZ(0,"button",13),i._UZ(1,"mat-icon",14),i.qZA())}function w(t,e){1&t&&i._UZ(0,"mat-progress-bar",15)}function b(t,e){if(1&t){const t=i.EpF();i.ynx(0),i.TgZ(1,"div",16),i.TgZ(2,"mat-form-field",17),i.TgZ(3,"mat-label"),i._uU(4,"Nama"),i.qZA(),i.TgZ(5,"input",18),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw().form.nama=e}),i.qZA(),i.qZA(),i.TgZ(6,"mat-form-field",17),i.TgZ(7,"mat-label"),i._uU(8,"Keterangan"),i.qZA(),i.TgZ(9,"textarea",19),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw().form.keterangan=e}),i.qZA(),i.qZA(),i.qZA(),i.BQk()}if(2&t){const t=i.oxw();i.xp6(5),i.Q6J("ngModel",t.form.nama)("readonly",t.State.is_detail),i.xp6(4),i.Q6J("ngModel",t.form.keterangan)("readonly",t.State.is_detail)}}function Z(t,e){1&t&&i._UZ(0,"mat-progress-spinner",20),2&t&&i.Q6J("diameter",24)("mode","indeterminate")}function y(t,e){if(1&t&&(i.TgZ(0,"button",21),i._UZ(1,"mat-icon",22),i._uU(2," Simpan "),i.qZA()),2&t){const t=i.oxw();i.Q6J("disabled",!t.form.nama||!t.form.keterangan)}}function C(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"button",23),i.NdJ("click",function(){return i.CHM(t),i.oxw().State.is_detail=!1}),i._UZ(2,"mat-icon",24),i._uU(3," Edit "),i.qZA(),i.TgZ(4,"button",25),i.NdJ("click",function(){return i.CHM(t),i.oxw().openPermSetting()}),i._UZ(5,"mat-icon",26),i._uU(6," Permissions Setting "),i.qZA(),i.qZA()}}function v(t,e){1&t&&(i.TgZ(0,"button",27),i._uU(1," Close "),i._UZ(2,"mat-icon",28),i.qZA())}let S=(()=>{class t{constructor(t,e){this.core=t,this.dialogRef=e,this.form={id:"add"},this.Default={},this.State={},this.Com={},this.Busy=!1,this.Ready=!1}ngOnInit(){"add"!=this.State.id?this.getData():this.Ready=!0}getData(){this.Busy=!0,this.core.Do(this.Com.url+"get",{id:this.State.id}).subscribe(t=>{t&&(this.form=t.data),this.Ready=!0,this.Busy=!1},t=>{console.error("Error Getting Data",t),this.core.OpenAlert({msg:"Error Getting Data"}),this.dialogRef.close()})}Submit(){var t=this.Com.url+"edit";"add"==this.form.id&&(t=this.Com.url+"add"),this.form.gperm=JSON.stringify(this.form.grup);var e=null;this.Busy=!0,this.core.Do(t,this.form).subscribe(t=>{1==t.status?(t.reload=!0,this.dialogRef.close(t)):((e=t.error_msg)||(e="Submit Error!"),this.core.OpenAlert({msg:e}))},t=>{this.core.OpenAlert({msg:e="Fatal Error"}),console.error("Submit Error",t),this.Busy=!1})}openPermSetting(){this.dialogRef.close({openSetting:!0,dataId:this.State.id})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(n.Q),i.Y36(r.so))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-form-perm"]],decls:16,vars:7,consts:[["ngNativeValidate","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","autocomplete","off",1,"dialog-content-wrapper","flex-0","min-w-100",3,"ngSubmit"],["cdkDragHandle","","matDialogTitle","",1,"p-8","pl-6","pr-6","m-0","bg-primary-800","text-contrast"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["mat-button","","type","button","class","mat-icon-button","mat-dialog-close","","aria-label","Close dialog","tabindex","-1",4,"ngIf"],[1,"p-6","m-0","flex","sm:flex-row","xs:flex-col","flex-wrap"],["mode","indeterminate","class","bg-primary-900 m-10 ml-2 mr-2",4,"ngIf"],[4,"ngIf"],[1,"p-2","pl-4","pr-4","m-0","flex","flex-col","xs:flex-row"],[1,"flex-1","flex-row"],["class","ml-2",3,"diameter","mode",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],[1,"flex"],["mat-button","","type","button","mat-dialog-close","","class","ml-8",4,"ngIf"],["mat-button","","type","button","mat-dialog-close","","aria-label","Close dialog","tabindex","-1",1,"mat-icon-button"],["svgIcon","heroicons_outline:x",1,"icon-size-7","text-contrast"],["mode","indeterminate",1,"bg-primary-900","m-10","ml-2","mr-2"],[1,"flex","flex-auto","flex-col"],["appearance","outline",1,"small"],["matInput","","placeholder","Masukkan Nama","name","nama","required","",3,"ngModel","readonly","ngModelChange"],["matInput","","placeholder","Masukkan Keterangan","name","keterangan","required","","matTextareaAutosize","","matAutosizeMinRows","2",3,"ngModel","readonly","ngModelChange"],[1,"ml-2",3,"diameter","mode"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["svgIcon","mat_outline:save",1,"icon-size-5","mr-1"],["mat-flat-button","","color","accent","type","button",3,"click"],["svgIcon","mat_outline:edit",1,"icon-size-5","mr-1"],["mat-flat-button","","type","button",3,"click"],["svgIcon","heroicons_outline:shield-check",1,"icon-size-5","mr-1"],["mat-button","","type","button","mat-dialog-close","",1,"ml-8"],["svgIcon","heroicons_outline:x",1,"icon-size-4","ml-1"]],template:function(t,e){1&t&&(i.TgZ(0,"form",0),i.NdJ("ngSubmit",function(){return e.Submit()}),i.TgZ(1,"mat-toolbar",1),i.TgZ(2,"div",2),i.TgZ(3,"span"),i._uU(4," Form Permission "),i.qZA(),i.YNc(5,x,2,0,"button",3),i.qZA(),i.qZA(),i.TgZ(6,"mat-dialog-content",4),i.YNc(7,w,1,0,"mat-progress-bar",5),i.YNc(8,b,10,4,"ng-container",6),i.qZA(),i.TgZ(9,"mat-dialog-actions",7),i.TgZ(10,"div",8),i.YNc(11,Z,1,2,"mat-progress-spinner",9),i.YNc(12,y,3,1,"button",10),i.YNc(13,C,7,0,"div",6),i.qZA(),i.TgZ(14,"div",11),i.YNc(15,v,3,0,"button",12),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(5),i.Q6J("ngIf",!e.Busy),i.xp6(2),i.Q6J("ngIf",!e.Ready),i.xp6(1),i.Q6J("ngIf",e.Ready),i.xp6(3),i.Q6J("ngIf",e.Busy),i.xp6(1),i.Q6J("ngIf",!e.State.is_detail&&!e.Busy),i.xp6(1),i.Q6J("ngIf",e.State.is_detail&&!e.Busy),i.xp6(2),i.Q6J("ngIf",!e.Busy))},directives:[a.JL,a.F,s.Zt,l.Ye,s.Bh,r.uh,c.yH,c.xw,c.Wh,d.O5,r.xY,r.H8,m.lW,r.ZT,u.Hw,g.pW,p.KE,p.hX,f.Nt,a.Fj,a.Q7,a.JJ,a.On,f.D7,h.Ou],encapsulation:2}),t})()},24818:(t,e,o)=>{"use strict";o.d(e,{s:()=>I});var i=o(37716),n=o(42448),r=o(22238),a=o(3679),s=o(77310),l=o(12522),c=o(35618),d=o(38583),m=o(51095),u=o(76627),g=o(12178),p=o(1562),f=o(7539),h=o(4885);function x(t,e){1&t&&(i.TgZ(0,"button",14),i._UZ(1,"mat-icon",15),i.qZA())}function w(t,e){1&t&&i._UZ(0,"mat-progress-bar",16)}function b(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",27),i.TgZ(1,"div"),i.TgZ(2,"mat-checkbox",24),i.NdJ("ngModelChange",function(e){const o=i.CHM(t).index,n=i.oxw().index,r=i.oxw().index;return i.oxw(2).Data[r].children[n].action[o].checked=e})("ngModelChange",function(){const e=i.CHM(t).$implicit,o=i.oxw().index,n=i.oxw().index;return i.oxw(2).CheckChecked(n+"-"+o,e)}),i._uU(3),i.qZA(),i.qZA(),i.qZA()}if(2&t){const t=e.$implicit,o=e.index,n=i.oxw().index,r=i.oxw().index,a=i.oxw(2);i.xp6(2),i.cQ8("name","act-",r,"-",n,"-",o,""),i.Q6J("ngModel",a.Data[r].children[n].action[o].checked)("checked",!0),i.xp6(1),i.hij(" ",t.text," ")}}function Z(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"tr"),i.TgZ(1,"td"),i.TgZ(2,"div",23),i.TgZ(3,"mat-checkbox",24),i.NdJ("ngModelChange",function(e){const o=i.CHM(t).index,n=i.oxw().index;return i.oxw(2).Data[n].children[o].checked=e})("ngModelChange",function(){const e=i.CHM(t).index,o=i.oxw().index;return i.oxw(2).CheckChecked(o+"-"+e,"com")}),i.TgZ(4,"div",25),i.TgZ(5,"strong"),i._uU(6),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.YNc(7,b,4,6,"div",26),i.qZA(),i.qZA()}if(2&t){const t=e.$implicit,o=e.index,n=i.oxw().index,r=i.oxw(2);i.xp6(3),i.hYB("name","com-",n,"-",o,""),i.Q6J("ngModel",r.Data[n].children[o].checked)("checked",t.checked||t.action.length==t.count),i.xp6(3),i.AsE(" ",t.alias," (",t.id,") "),i.xp6(1),i.Q6J("ngForOf",t.action)}}function y(t,e){if(1&t&&(i.TgZ(0,"mat-expansion-panel",19),i.TgZ(1,"mat-expansion-panel-header"),i.TgZ(2,"strong",20),i._uU(3),i.qZA(),i._uU(4),i.qZA(),i.TgZ(5,"table",21),i.YNc(6,Z,8,7,"tr",22),i.qZA(),i.qZA()),2&t){const t=e.$implicit;i.Q6J("hideToggle",!1),i.xp6(3),i.hij("[",t.id,"]"),i.xp6(1),i.hij(" ",t.alias," "),i.xp6(2),i.Q6J("ngForOf",t.children)}}function C(t,e){if(1&t&&(i.ynx(0),i.TgZ(1,"mat-accordion",17),i.YNc(2,y,7,4,"mat-expansion-panel",18),i.qZA(),i.BQk()),2&t){const t=i.oxw();i.xp6(2),i.Q6J("ngForOf",t.Data)}}function v(t,e){1&t&&i._UZ(0,"mat-progress-spinner",28),2&t&&i.Q6J("diameter",24)("mode","indeterminate")}function S(t,e){1&t&&(i.TgZ(0,"button",29),i._UZ(1,"mat-icon",30),i._uU(2," Simpan "),i.qZA())}function A(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"button",31),i.NdJ("click",function(){return i.CHM(t),i.oxw().State.is_detail=!1}),i._UZ(1,"mat-icon",32),i._uU(2," Edit "),i.qZA()}}function k(t,e){1&t&&(i.TgZ(0,"button",33),i._uU(1," Close "),i._UZ(2,"mat-icon",34),i.qZA())}let I=(()=>{class t{constructor(t,e){this.core=t,this.dialogRef=e,this.Default={},this.State={},this.Com={},this.Busy=!1,this.Ready=!1}ngOnInit(){this.getData()}getData(){this.Busy=!0;var t=null;this.core.Do(this.Com.url+"perm.list",{id:this.State.id}).subscribe(e=>{(e.status=1)?(this.Data=e.data,this.Ready=!0,this.Busy=!1):((t=e.error_msg)||(t="Error Getting Data!"),this.core.OpenAlert({msg:t}),this.Busy=!1)},t=>{console.error(t),this.Busy=!1})}Submit(){var t={id:this.State.id,data:JSON.stringify(this.Data)},e=null;this.Busy=!0,this.core.Do(this.Com.url+"perm.set",t).subscribe(t=>{1==t.status?(this.core.OpenAlert({title:"Permission Setting Success",type:"success",msg:e="Permission is saved succesfully."}),this.dialogRef.close(t)):((e=t.error_msg)||(e="Submit Error!"),this.core.OpenAlert({msg:e}),this.Busy=!1)},t=>{this.core.OpenNotif(t),this.Busy=!1})}CheckChecked(t,e){var o=t.split("-");if("com"==e){let t=this.Data[o[0]].children[o[1]].action.length;var i=!0;this.Data[o[0]].children[o[1]].checked||(i=!1);for(let e=0;e<t;e++)this.Data[o[0]].children[o[1]].action[e].checked=i}else setTimeout(()=>{let e=0;var i=$('input[type="checkbox"][name*=act-'+t+"]");$(i).each(o=>{$('input[type="checkbox"][name="act-'+t+"-"+o+'"]').parent().parent().parent().parent().find(".mat-checkbox-checked").length>0&&e++}),this.Data[o[0]].children[o[1]].count=e,e!=this.Data[o[0]].children[o[1]].action.length&&(this.Data[o[0]].children[o[1]].checked=!1)},500)}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(n.Q),i.Y36(r.so))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-form-perm_setting"]],decls:16,vars:7,consts:[["ngNativeValidate","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","autocomplete","off",1,"dialog-content-wrapper","flex-0","min-w-100",3,"ngSubmit"],["cdkDragHandle","","matDialogTitle","",1,"p-8","pl-6","pr-6","m-0","bg-primary-800","text-contrast"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["mat-button","","type","button","class","mat-icon-button","mat-dialog-close","","aria-label","Close dialog","tabindex","-1",4,"ngIf"],[1,"p-6","m-0","min-w-140","flex","flex-auto","sm:flex-row","xs:flex-col","flex-wrap",2,"background-color","whitesmoke"],["mode","indeterminate","class","bg-primary-900 m-10 ml-2 mr-2",4,"ngIf"],[4,"ngIf"],[1,"p-2","pl-4","pr-4","m-0","flex","flex-col","xs:flex-row"],[1,"flex-1","flex-row"],["class","ml-2",3,"diameter","mode",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["mat-flat-button","","color","accent","type","button",3,"click",4,"ngIf"],[1,"flex"],["mat-button","","type","button","mat-dialog-close","",4,"ngIf"],["mat-button","","type","button","mat-dialog-close","","aria-label","Close dialog","tabindex","-1",1,"mat-icon-button"],["svgIcon","heroicons_outline:x",1,"icon-size-7","text-contrast"],["mode","indeterminate",1,"bg-primary-900","m-10","ml-2","mr-2"],["displayMode","default","multi","false",1,"flex","flex-auto","flex-col"],["class","p-2 m-0 mb-2",3,"hideToggle",4,"ngFor","ngForOf"],[1,"p-2","m-0","mb-2",3,"hideToggle"],[2,"padding-right","20px"],[1,"table","table-noborder"],[4,"ngFor","ngForOf"],[2,"margin-bottom","5px"],[3,"ngModel","checked","name","ngModelChange"],[2,"padding-left","10px"],["style","padding: 5px; padding-left: 40px;",4,"ngFor","ngForOf"],[2,"padding","5px","padding-left","40px"],[1,"ml-2",3,"diameter","mode"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["svgIcon","mat_outline:save",1,"icon-size-5","mr-1"],["mat-flat-button","","color","accent","type","button",3,"click"],["svgIcon","mat_outline:edit",1,"icon-size-5","mr-1"],["mat-button","","type","button","mat-dialog-close",""],["svgIcon","heroicons_outline:x",1,"icon-size-4","ml-1"]],template:function(t,e){1&t&&(i.TgZ(0,"form",0),i.NdJ("ngSubmit",function(){return e.Submit()}),i.TgZ(1,"mat-toolbar",1),i.TgZ(2,"div",2),i.TgZ(3,"span"),i._uU(4," Permission Setting "),i.qZA(),i.YNc(5,x,2,0,"button",3),i.qZA(),i.qZA(),i.TgZ(6,"mat-dialog-content",4),i.YNc(7,w,1,0,"mat-progress-bar",5),i.YNc(8,C,3,1,"ng-container",6),i.qZA(),i.TgZ(9,"mat-dialog-actions",7),i.TgZ(10,"div",8),i.YNc(11,v,1,2,"mat-progress-spinner",9),i.YNc(12,S,3,0,"button",10),i.YNc(13,A,3,0,"button",11),i.qZA(),i.TgZ(14,"div",12),i.YNc(15,k,3,0,"button",13),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(5),i.Q6J("ngIf",!e.Busy),i.xp6(2),i.Q6J("ngIf",!e.Ready),i.xp6(1),i.Q6J("ngIf",e.Ready),i.xp6(3),i.Q6J("ngIf",e.Busy),i.xp6(1),i.Q6J("ngIf",!e.State.is_detail&&!e.Busy),i.xp6(1),i.Q6J("ngIf",e.State.is_detail&&!e.Busy),i.xp6(2),i.Q6J("ngIf",!e.Busy))},directives:[a.JL,a.F,s.Zt,l.Ye,s.Bh,r.uh,c.yH,c.xw,c.Wh,d.O5,r.xY,r.H8,m.lW,r.ZT,u.Hw,g.pW,p.pp,d.sg,p.ib,p.yz,f.oG,a.JJ,a.On,h.Ou],encapsulation:2}),t})()},66390:(t,e,o)=>{"use strict";o.d(e,{W:()=>w});var i=o(79765),n=o(47694),r=o(24818),a=o(37716),s=o(42448),l=o(15362),c=o(22238),d=o(51095),m=o(76627),u=o(38583),g=o(71386),p=o(571);function f(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",10),a.NdJ("click",function(){return a.CHM(t),a.oxw().ResetFilter()}),a._UZ(1,"mat-icon",4),a._uU(2," Clear Filter "),a.qZA()}2&t&&(a.xp6(1),a.Q6J("svgIcon","heroicons_outline:x"))}function h(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){return a.CHM(t),a.oxw().openForm("add")}),a._UZ(1,"mat-icon",4),a._uU(2," Add New Permissions "),a.qZA()}2&t&&(a.xp6(1),a.Q6J("svgIcon","heroicons_solid:plus"))}function x(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"ag-grid-angular",12),a.NdJ("gridReady",function(e){return a.CHM(t),a.oxw().onGridReady(e)})("filterChanged",function(e){return a.CHM(t),a.oxw().FilterChanged(e)})("sortChanged",function(e){return a.CHM(t),a.oxw().SortChanged(e)})("cellDoubleClicked",function(e){return a.CHM(t),a.oxw().onDoubleClick(e)}),a.qZA()}if(2&t){const t=a.oxw();a.Q6J("columnDefs",t.TableCol)("getContextMenuItems",t.getContextMenuItems)("defaultColDef",t.gridOptions.defaultColDef)("context",t.gridOptions.context)("animateRows",t.gridOptions.animateRows)("allowContextMenuWithControlKey",t.gridOptions.allowContextMenuWithControlKey)("serverSideStoreType",t.gridOptions.serverSideStoreType)("rowModelType",t.gridOptions.rowModelType)("rowBuffer",t.gridOptions.rowBuffer)("debug",t.gridOptions.debug)("rowSelection",t.gridOptions.rowSelection)("cacheOverflowSize",t.gridOptions.cacheOverflowSize)("maxConcurrentDatasourceRequests",t.gridOptions.maxConcurrentDatasourceRequests)("infiniteInitialRowCount",t.gridOptions.infiniteInitialRowCount)("cacheBlockSize",t.gridOptions.cacheBlockSize)("maxBlocksInCache",t.gridOptions.maxBlocksInCache)("multiSortKey",t.gridOptions.multiSortKey)("multiSortKey",t.gridOptions.multiSortKey)("tooltipShowDelay",t.gridOptions.tooltipShowDelay)}}let w=(()=>{class t{constructor(t,e,o){this.core=t,this.dataService=e,this.dialog=o,this._unsubscribeAll=new i.xQ,this.Ready=!1,this.Default={},this.form={},this.Busy=!1,this.Com={url:"e/_system/perm/",id:"system.perm",name:"Manage Permission"},this.dialogRefConfig={disableClose:!0},this.dialogPermConfig={disableClose:!0},this.gridFilter="{}",this.gridSort="[]",this.gridFiltered=!1,this.gridSorted=!1,this.TableCol=[{headerName:"Nama",field:"nama",tooltipField:"nama",width:200,suppressSizeToFit:!0},{headerName:"Keterangan",field:"keterangan",width:300}]}ngOnInit(){this.core.setTitle(this.Com.name),this.core.loadDefault({url:this.Com.url,id:this.Com.id}).then(t=>{t&&(this.Default=t,t.perm_hash&&(this.perm=t.perm_hash)),this.Ready=!0})}ngAfterViewInit(){this.gridOptions=this.core.getGridOptions(),this.gridOptions.context={parent:this}}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}Reload(){this.loadData(this.gridParams)}ResetFilter(){this.FilterReset(),this.SortReset()}loadData(t={}){var e={url:this.Com.url,id:this.Com.id};this.gridFilter&&"{}"!=this.gridFilter&&(e.filter=this.gridFilter),this.gridSort&&"[]"!=this.gridSort&&(e.sort=this.gridSort);var o=this.dataService.gridLoadDatasource(t,e);t.api.setServerSideDatasource(o)}openForm(t){this.showDialog(t)}showDialog(t){this.dialogRef=this.dialog.open(n.K,this.dialogRefConfig),this.dialogRef.componentInstance.Default=this.Default,this.dialogRef.componentInstance.Com=this.Com,this.dialogRef.componentInstance.State=this.core.splitID(t),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=null,t&&(t.reload&&this.gridApi.refreshServerSideStore({purge:!0}),t.openSetting&&this.showPermSettingDialog(t.dataId))})}showPermSettingDialog(t){this.dialogPerm=this.dialog.open(r.s,this.dialogPermConfig),this.dialogPerm.componentInstance.Default=this.Default,this.dialogPerm.componentInstance.Com=this.Com,this.dialogPerm.componentInstance.State=this.core.splitID(t),this.dialogPerm.afterClosed().subscribe(t=>{this.dialogPerm=null,t.reload&&this.gridApi.refreshServerSideStore({purge:!0})})}Delete(t){this.core.OpenConfirm({title:"Apakah Anda yakin?",html:"<div>Menghapus data permissions?</div><div><small><strong>"+t.nama+"</strong></small></div>",icon:"warning",confirmText:"Yakin"},e=>{e.value&&this.core.Do(this.Com.url+"delete",{id:t.id}).subscribe(t=>{1==t.status?this.gridApi.refreshServerSideStore({purge:!0}):this.core.OpenAlert({msg:t.error_msg})},t=>{console.error(t)})})}Disable(t){console.log(t),this.core.OpenConfirm({title:"Apakah Anda yakin?",html:"<div>Menonaktifkan user?</div><div><small><strong>"+t.nama+"</strong></small></div>",icon:"warning",confirmText:"Yakin"},e=>{e.value&&this.core.Do(this.Com.url+"disable",{id:t.id}).subscribe(t=>{1==t.status?this.gridApi.refreshServerSideStore({purge:!0}):this.core.OpenAlert({msg:t.error_msg})},t=>{console.error(t)})})}onGridReady(t){this.gridParams=t,this.gridApi=t.api,t.api.sizeColumnsToFit(),this.loadData(t)}FilterChanged(t){var e=t.api.getFilterModel();this.gridFilter=JSON.stringify(e),this.gridFiltered=!1,Object.keys(e).length>0&&(this.gridFiltered=!0),this.loadData(t)}FilterReset(){this.gridApi.setFilterModel(null),this.gridFiltered=!1}SortChanged(t){var e=t.columnApi.getColumnState();this.gridSort=JSON.stringify(e),this.gridSorted=!1;for(let o of e)if(o.sort){this.gridSorted=!0;break}this.loadData(t)}SortReset(){this.gridParams.columnApi.applyColumnState({defaultState:{sort:null}}),this.gridSorted=!1}onDoubleClick(t){this.openForm("detail-"+t.data.id)}getContextMenuItems(t){var e=[],o=t.node.data,i=t.context.parent;i.perm.edit&&e.push({name:"Edit",action:function(){i.openForm(o.id)},icon:'\n                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />\n                    </svg>\n                ',cssClasses:["text-blue-500"]}),i.perm.hapus&&e.push({name:"Delete",action:function(){i.Delete(o)},icon:'\n                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />\n                    </svg>\n                ',cssClasses:["text-red-500"]}),i.perm.permission&&(e.push("separator"),e.push({name:"Permission Setting",action:function(){i.showPermSettingDialog(o.id)},icon:'\n                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />\n                    </svg>\n                ',cssClasses:[]}));var n=e;return e.length<=0&&(n=!1),n}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(s.Q),a.Y36(l.D),a.Y36(c.uw))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-perm"]],decls:11,vars:4,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pt-2","pb-2","pr-8","pl-6","bg-grey","dark:bg-transparent"],[1,"flex-1","min-w-0"],["mat-flat-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],["class","ml-2","mat-flat-button","","color","warn",3,"click",4,"ngIf"],[1,"flex","flex-shrink-0","items-center","mt-2","sm:mt-0","sm:ml-0"],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["cdkScrollable","",1,"flex-auto","p-0","sm:p-0","overflow-y-auto"],["class","grid-class ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","serverSideStoreType","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","multiSortKey","tooltipShowDelay","gridReady","filterChanged","sortChanged","cellDoubleClicked",4,"ngIf"],["mat-flat-button","","color","warn",1,"ml-2",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"grid-class","ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","serverSideStoreType","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","multiSortKey","tooltipShowDelay","gridReady","filterChanged","sortChanged","cellDoubleClicked"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"button",3),a.NdJ("click",function(){return e.Reload()}),a._UZ(4,"mat-icon",4),a._uU(5," Reload Data "),a.qZA(),a.YNc(6,f,3,1,"button",5),a.qZA(),a.TgZ(7,"div",6),a.YNc(8,h,3,1,"button",7),a.qZA(),a.qZA(),a.TgZ(9,"div",8),a.YNc(10,x,1,19,"ag-grid-angular",9),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Q6J("svgIcon","heroicons_outline:refresh"),a.xp6(2),a.Q6J("ngIf",e.gridFiltered||e.gridSorted),a.xp6(2),a.Q6J("ngIf",e.perm&&e.perm.add),a.xp6(2),a.Q6J("ngIf",e.Ready))},directives:[d.lW,m.Hw,u.O5,g.PQ,p.N8],styles:[""]}),t})()},52700:(t,e,o)=>{"use strict";o.d(e,{FV:()=>d});var i=o(39895),n=o(83105),r=o(45749),a=(o(35078),o(66390)),s=(o(47694),o(24818),o(58790)),l=o(37716);const c=[{path:"",children:[{data:{id:13},canActivate:[n.a],path:"user",component:r.A},{data:{id:12},canActivate:[n.a],path:"permission",component:a.W},{path:"change-password",component:s.p}]}];let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.Bz.forChild(c)],i.Bz]}),t})()},96853:(t,e,o)=>{"use strict";o.r(e),o.d(e,{SystemModule:()=>d});var i=o(38583),n=o(52700),r=o(49616),a=o(571),s=o(3679),l=o(66951),c=o(37716);o(45749),o(66390),o(58790),o(35078),o(47694),o(24818);let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,n.FV,r.m,a.sF.withComponents([]),s.UX,l.f]]}),t})()},35078:(t,e,o)=>{"use strict";o.d(e,{w:()=>M});var i=o(37716),n=o(42448),r=o(22238),a=o(3679),s=o(77310),l=o(12522),c=o(35618),d=o(38583),m=o(51095),u=o(76627),g=o(12178),p=o(98295),f=o(83166),h=o(67441),x=o(5015),w=o(4885);function b(t,e){1&t&&(i.TgZ(0,"button",14),i._UZ(1,"mat-icon",15),i.qZA())}function Z(t,e){1&t&&i._UZ(0,"mat-progress-bar",16)}function y(t,e){1&t&&i._UZ(0,"mat-icon",30),2&t&&i.Q6J("svgIcon","heroicons_solid:eye")}function C(t,e){1&t&&i._UZ(0,"mat-icon",30),2&t&&i.Q6J("svgIcon","heroicons_solid:eye-off")}function v(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"button",28),i.NdJ("click",function(){i.CHM(t);const e=i.oxw(3);return e.passwordType="password"===e.passwordType?"text":"password"}),i.YNc(1,y,1,1,"mat-icon",29),i.YNc(2,C,1,1,"mat-icon",29),i.qZA()}if(2&t){const t=i.oxw(3);i.xp6(1),i.Q6J("ngIf","password"===t.passwordType),i.xp6(1),i.Q6J("ngIf","text"===t.passwordType)}}function S(t,e){1&t&&(i.TgZ(0,"div",31),i.TgZ(1,"small"),i.TgZ(2,"em",32),i._uU(3," Silahkan isi password jika Anda ingin "),i.TgZ(4,"strong"),i._uU(5,"mengganti"),i.qZA(),i._uU(6," password user. "),i.qZA(),i.qZA(),i.qZA())}function A(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"mat-form-field",24),i.TgZ(1,"mat-label"),i._uU(2,"Password"),i.qZA(),i.TgZ(3,"input",25),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw(2).form.password=e}),i.qZA(),i.YNc(4,v,3,2,"button",26),i.YNc(5,S,7,0,"div",27),i.qZA()}if(2&t){const t=i.oxw(2);i.Q6J("floatLabel","add"==t.State.id?"auto":"always"),i.xp6(3),i.Q6J("placeholder","add"==t.State.id?"Masukkan Password":"Ganti password")("ngModel",t.form.password)("required","add"==t.form.id)("type",t.passwordType)("readonly",t.State.is_detail),i.xp6(1),i.Q6J("ngIf",!t.State.is_detail),i.xp6(1),i.Q6J("ngIf","add"!=t.form.id)}}function k(t,e){if(1&t&&(i.TgZ(0,"mat-option",35),i._uU(1),i.qZA()),2&t){const t=e.$implicit;i.Q6J("value",t.id),i.xp6(1),i.hij(" ",t.nama," ")}}function I(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"mat-form-field",18),i.TgZ(1,"mat-label"),i._uU(2,"Group Permissions"),i.qZA(),i.TgZ(3,"mat-select",33),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw(2).form.grup=e}),i.YNc(4,k,2,2,"mat-option",34),i.qZA(),i.qZA()}if(2&t){const t=i.oxw(2);i.xp6(3),i.Q6J("ngModel",t.form.grup)("disabled",t.State.is_detail),i.xp6(1),i.Q6J("ngForOf",t.Default.group)}}function T(t,e){if(1&t){const t=i.EpF();i.ynx(0),i.TgZ(1,"div",17),i.TgZ(2,"mat-form-field",18),i.TgZ(3,"mat-label"),i._uU(4,"Nama"),i.qZA(),i.TgZ(5,"input",19),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw().form.nama=e}),i.qZA(),i.qZA(),i.TgZ(6,"mat-form-field",18),i.TgZ(7,"mat-label"),i._uU(8,"Username"),i.qZA(),i.TgZ(9,"input",20),i.NdJ("ngModelChange",function(e){return i.CHM(t),i.oxw().form.username=e}),i.qZA(),i.qZA(),i.YNc(10,A,6,8,"mat-form-field",21),i.qZA(),i.TgZ(11,"div",22),i.YNc(12,I,5,3,"mat-form-field",23),i.qZA(),i.BQk()}if(2&t){const t=i.oxw();i.xp6(5),i.Q6J("ngModel",t.form.nama)("readonly",t.State.is_detail),i.xp6(4),i.Q6J("ngModel",t.form.username)("readonly","add"!=t.form.id),i.xp6(1),i.Q6J("ngIf",!t.State.is_detail),i.xp6(2),i.Q6J("ngIf",t.Default&&t.Default.group)}}function _(t,e){1&t&&i._UZ(0,"mat-progress-spinner",36),2&t&&i.Q6J("diameter",24)("mode","indeterminate")}function D(t,e){if(1&t&&(i.TgZ(0,"button",37),i._UZ(1,"mat-icon",38),i._uU(2," Simpan "),i.qZA()),2&t){const t=i.oxw();i.Q6J("disabled",!t.form.nama||!t.form.username||!t.form.grup||t.form.grup.length<=0||"add"==t.form.id&&!t.form.password)}}function q(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"button",39),i.NdJ("click",function(){return i.CHM(t),i.oxw().State.is_detail=!1}),i._UZ(1,"mat-icon",40),i._uU(2," Edit "),i.qZA()}}function J(t,e){1&t&&(i.TgZ(0,"button",41),i._uU(1," Close "),i._UZ(2,"mat-icon",42),i.qZA())}let M=(()=>{class t{constructor(t,e){this.core=t,this.dialogRef=e,this.form={id:"add"},this.Default={},this.State={},this.Com={},this.Busy=!1,this.Ready=!1,this.passwordType="password"}ngOnInit(){"add"!=this.State.id?this.getData():this.Ready=!0}getData(){this.Busy=!0,this.core.Do(this.Com.url+"get",{id:this.State.id}).subscribe(t=>{t&&(this.form=t.data),this.Busy=!1,this.Ready=!0},t=>{console.error("Error Getting Data",t),this.core.OpenAlert({msg:"Error Getting Data"}),this.dialogRef.close()})}Submit(){var t=this.Com.url+"edit";"add"==this.form.id&&(t=this.Com.url+"add"),this.form.gperm=JSON.stringify(this.form.grup);var e=null;this.Busy=!0,this.core.Do(t,this.form).subscribe(t=>{1==t.status?this.dialogRef.close(t):((e=t.error_msg)||(e="Submit Error!"),this.core.OpenAlert({msg:e}))},t=>{this.core.OpenAlert({msg:e="Fatal Error"}),console.error("Submit Error",t),this.Busy=!1})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(n.Q),i.Y36(r.so))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-form-user"]],decls:16,vars:7,consts:[["ngNativeValidate","","cdkDrag","","cdkDragRootElement",".cdk-overlay-pane","autocomplete","off",1,"dialog-content-wrapper","flex-0","min-w-100",3,"ngSubmit"],["cdkDragHandle","","matDialogTitle","",1,"p-8","pl-6","pr-6","m-0","bg-primary-800","text-contrast"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["mat-button","","type","button","class","mat-icon-button","mat-dialog-close","","aria-label","Close dialog","tabindex","-1",4,"ngIf"],[1,"p-6","m-0","flex","sm:flex-row","xs:flex-col","flex-wrap","justify-items-center"],["mode","indeterminate","class","text-primary-900",4,"ngIf"],[4,"ngIf"],[1,"p-2","pl-4","pr-4","m-0","flex","flex-col","xs:flex-row"],[1,"flex-1","flex-row"],["class","ml-2",3,"diameter","mode",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["mat-flat-button","","color","accent","type","button",3,"click",4,"ngIf"],[1,"flex"],["mat-button","","type","button","mat-dialog-close","",4,"ngIf"],["mat-button","","type","button","mat-dialog-close","","aria-label","Close dialog","tabindex","-1",1,"mat-icon-button"],["svgIcon","heroicons_outline:x",1,"icon-size-7","text-contrast"],["mode","indeterminate",1,"text-primary-900"],[1,"flex","flex-col","mr-4"],["appearance","outline",1,"small"],["matInput","","placeholder","Masukkan Nama User","name","nama","maxlength","50","required","",3,"ngModel","readonly","ngModelChange"],["matInput","","placeholder","Masukkan Username","name","username","maxlength","50","required","",3,"ngModel","readonly","ngModelChange"],["appearance","outline","class","small",3,"floatLabel",4,"ngIf"],[1,"flex","flex-col"],["appearance","outline","class","small",4,"ngIf"],["appearance","outline",1,"small",3,"floatLabel"],["matInput","","name","password","maxlength","50",3,"placeholder","ngModel","required","type","readonly","ngModelChange"],["mat-icon-button","","type","button","matSuffix","","tabindex","-1",3,"click",4,"ngIf"],["class","mt-8",4,"ngIf"],["mat-icon-button","","type","button","matSuffix","","tabindex","-1",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"mt-8"],[1,"grey-fg"],["placeholder","Select Group Permissions","multiple","","name","grup",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ml-2",3,"diameter","mode"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["svgIcon","mat_outline:save",1,"icon-size-5","mr-1"],["mat-flat-button","","color","accent","type","button",3,"click"],["svgIcon","mat_outline:edit",1,"icon-size-5","mr-1"],["mat-button","","type","button","mat-dialog-close",""],["svgIcon","heroicons_outline:x",1,"icon-size-4","ml-1"]],template:function(t,e){1&t&&(i.TgZ(0,"form",0),i.NdJ("ngSubmit",function(){return e.Submit()}),i.TgZ(1,"mat-toolbar",1),i.TgZ(2,"div",2),i.TgZ(3,"span"),i._uU(4," Form User "),i.qZA(),i.YNc(5,b,2,0,"button",3),i.qZA(),i.qZA(),i.TgZ(6,"mat-dialog-content",4),i.YNc(7,Z,1,0,"mat-progress-bar",5),i.YNc(8,T,13,6,"ng-container",6),i.qZA(),i.TgZ(9,"mat-dialog-actions",7),i.TgZ(10,"div",8),i.YNc(11,_,1,2,"mat-progress-spinner",9),i.YNc(12,D,3,1,"button",10),i.YNc(13,q,3,0,"button",11),i.qZA(),i.TgZ(14,"div",12),i.YNc(15,J,3,0,"button",13),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(5),i.Q6J("ngIf",!e.Busy),i.xp6(2),i.Q6J("ngIf",!e.Ready),i.xp6(1),i.Q6J("ngIf",e.Ready),i.xp6(3),i.Q6J("ngIf",e.Busy),i.xp6(1),i.Q6J("ngIf",!e.State.is_detail&&!e.Busy),i.xp6(1),i.Q6J("ngIf",e.State.is_detail&&!e.Busy),i.xp6(2),i.Q6J("ngIf",!e.Busy))},directives:[a.JL,a.F,s.Zt,l.Ye,s.Bh,r.uh,c.yH,c.xw,c.Wh,d.O5,r.xY,r.H8,m.lW,r.ZT,u.Hw,g.pW,p.KE,p.hX,f.Nt,a.Fj,a.nD,a.Q7,a.JJ,a.On,p.R9,h.gD,d.sg,x.ey,w.Ou],encapsulation:2}),t})()},45749:(t,e,o)=>{"use strict";o.d(e,{A:()=>x});var i=o(79765),n=o(35078),r=o(37716),a=o(42448),s=o(15362),l=o(22238),c=o(51095),d=o(76627),m=o(38583),u=o(71386),g=o(571);function p(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw().ResetFilter()}),r._UZ(1,"mat-icon",4),r._uU(2," Clear Filter "),r.qZA()}2&t&&(r.xp6(1),r.Q6J("svgIcon","heroicons_outline:x"))}function f(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"button",11),r.NdJ("click",function(){return r.CHM(t),r.oxw().openForm("add")}),r._UZ(1,"mat-icon",4),r._uU(2," Add New User "),r.qZA()}2&t&&(r.xp6(1),r.Q6J("svgIcon","heroicons_solid:user-add"))}function h(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"ag-grid-angular",12),r.NdJ("gridReady",function(e){return r.CHM(t),r.oxw().onGridReady(e)})("filterChanged",function(e){return r.CHM(t),r.oxw().FilterChanged(e)})("sortChanged",function(e){return r.CHM(t),r.oxw().SortChanged(e)})("cellDoubleClicked",function(e){return r.CHM(t),r.oxw().onDoubleClick(e)}),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("columnDefs",t.TableCol)("getContextMenuItems",t.getContextMenuItems)("defaultColDef",t.gridOptions.defaultColDef)("context",t.gridOptions.context)("animateRows",t.gridOptions.animateRows)("allowContextMenuWithControlKey",t.gridOptions.allowContextMenuWithControlKey)("serverSideStoreType",t.gridOptions.serverSideStoreType)("rowModelType",t.gridOptions.rowModelType)("rowBuffer",t.gridOptions.rowBuffer)("debug",t.gridOptions.debug)("rowSelection",t.gridOptions.rowSelection)("cacheOverflowSize",t.gridOptions.cacheOverflowSize)("maxConcurrentDatasourceRequests",t.gridOptions.maxConcurrentDatasourceRequests)("infiniteInitialRowCount",t.gridOptions.infiniteInitialRowCount)("cacheBlockSize",t.gridOptions.cacheBlockSize)("maxBlocksInCache",t.gridOptions.maxBlocksInCache)("multiSortKey",t.gridOptions.multiSortKey)("tooltipShowDelay",t.gridOptions.tooltipShowDelay)}}let x=(()=>{class t{constructor(t,e,o){this.core=t,this.dataService=e,this.dialog=o,this._unsubscribeAll=new i.xQ,this.Ready=!1,this.Default={},this.form={},this.Busy=!1,this.Com={url:"e/_system/user/",id:"system.user",name:"Manage User"},this.dialogRefConfig={disableClose:!0},this.gridFilter="{}",this.gridSort="[]",this.gridFiltered=!1,this.gridSorted=!1,this.TableCol=[{headerName:"Nama",field:"nama",tooltipField:"nama",width:200,suppressSizeToFit:!0},{headerName:"Username",field:"username",width:300}]}ngOnInit(){this.core.setTitle(this.Com.name),this.core.loadDefault({url:this.Com.url,id:this.Com.id}).then(t=>{t&&(this.Default=t,t.perm_hash&&(this.perm=t.perm_hash)),this.Ready=!0})}ngAfterViewInit(){this.gridOptions=this.core.getGridOptions(),this.gridOptions.context={parent:this}}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}Reload(){this.loadData(this.gridParams)}ResetFilter(){this.FilterReset(),this.SortReset()}loadData(t={}){var e={url:this.Com.url,id:this.Com.id};this.gridFilter&&"{}"!=this.gridFilter&&(e.filter=this.gridFilter),this.gridSort&&"[]"!=this.gridSort&&(e.sort=this.gridSort);var o=this.dataService.gridLoadDatasource(t,e);t.api.setServerSideDatasource(o)}openForm(t){this.showDialog(t)}showDialog(t){this.dialogRef=this.dialog.open(n.w,this.dialogRefConfig),this.dialogRef.componentInstance.Default=this.Default,this.dialogRef.componentInstance.Com=this.Com,this.dialogRef.componentInstance.State=this.core.splitID(t),this.dialogRef.afterClosed().subscribe(t=>{this.dialogRef=null,t&&this.gridApi.refreshServerSideStore({purge:!0})})}Delete(t){this.core.OpenConfirm({title:"Apakah Anda yakin?",html:"<div>Menghapus user?</div><div><small><strong>"+t.nama+"</strong></small></div>",icon:"warning",confirmText:"Yakin"},e=>{e.value&&this.core.Do(this.Com.url+"delete",{id:t.id}).subscribe(t=>{1==t.status?this.gridApi.refreshServerSideStore({purge:!0}):this.core.OpenAlert({msg:t.error_msg})},t=>{console.error(t)})})}Disable(t){this.core.OpenConfirm({title:"Apakah Anda yakin?",html:"<div>Menonaktifkan user?</div><div><small><strong>"+t.nama+"</strong></small></div>",icon:"warning",confirmText:"Yakin"},e=>{e.value&&this.core.Do(this.Com.url+"disable",{id:t.id}).subscribe(t=>{1==t.status?this.gridApi.refreshServerSideStore({purge:!0}):this.core.OpenAlert({msg:t.error_msg})},t=>{console.error(t)})})}onGridReady(t){this.gridParams=t,this.gridApi=t.api,t.api.sizeColumnsToFit(),this.loadData(t)}FilterChanged(t){var e=t.api.getFilterModel();this.gridFilter=JSON.stringify(e),this.gridFiltered=!1,Object.keys(e).length>0&&(this.gridFiltered=!0),this.loadData(t)}FilterReset(){this.gridApi.setFilterModel(null),this.gridFiltered=!1}SortChanged(t){var e=t.columnApi.getColumnState();this.gridSort=JSON.stringify(e),this.gridSorted=!1;for(let o of e)if(o.sort){this.gridSorted=!0;break}this.loadData(t)}SortReset(){this.gridParams.columnApi.applyColumnState({defaultState:{sort:null}}),this.gridSorted=!1}onDoubleClick(t){this.openForm("detail-"+t.data.id)}getContextMenuItems(t){var e=[],o=t.node.data,i=t.context.parent;i.perm.edit&&e.push({name:"Edit",action:function(){i.openForm(o.id)},icon:'\n                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />\n                    </svg>\n                ',cssClasses:["text-blue-500"]}),i.perm.hapus&&e.push({name:"Delete",action:function(){i.Delete(o)},icon:'\n                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />\n                    </svg>\n                ',cssClasses:["text-red-500"]}),i.perm.disable&&(e.push("separator"),e.push({name:"Disable / Suspend",action:function(){i.Disable(o)},icon:'\n                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />\n                    </svg>\n                ',cssClasses:["text-orange-500"]}));var n=e;return e.length<=0&&(n=!1),n}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(a.Q),r.Y36(s.D),r.Y36(l.uw))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-user"]],decls:11,vars:4,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pt-2","pb-2","pr-8","pl-6","bg-grey","dark:bg-transparent"],[1,"flex-1","min-w-0"],["mat-flat-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],["class","ml-2","mat-flat-button","","color","warn",3,"click",4,"ngIf"],[1,"flex","flex-shrink-0","items-center","mt-2","sm:mt-0","sm:ml-0"],["mat-flat-button","","color","accent",3,"click",4,"ngIf"],["cdkScrollable","",1,"flex-auto","p-0","sm:p-0","overflow-y-auto"],["class","grid-class ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","serverSideStoreType","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","multiSortKey","tooltipShowDelay","gridReady","filterChanged","sortChanged","cellDoubleClicked",4,"ngIf"],["mat-flat-button","","color","warn",1,"ml-2",3,"click"],["mat-flat-button","","color","accent",3,"click"],[1,"grid-class","ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","serverSideStoreType","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","multiSortKey","tooltipShowDelay","gridReady","filterChanged","sortChanged","cellDoubleClicked"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"button",3),r.NdJ("click",function(){return e.Reload()}),r._UZ(4,"mat-icon",4),r._uU(5," Reload Data "),r.qZA(),r.YNc(6,p,3,1,"button",5),r.qZA(),r.TgZ(7,"div",6),r.YNc(8,f,3,1,"button",7),r.qZA(),r.qZA(),r.TgZ(9,"div",8),r.YNc(10,h,1,18,"ag-grid-angular",9),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Q6J("svgIcon","heroicons_outline:refresh"),r.xp6(2),r.Q6J("ngIf",e.gridFiltered||e.gridSorted),r.xp6(2),r.Q6J("ngIf",e.perm&&e.perm.add),r.xp6(2),r.Q6J("ngIf",e.Ready))},directives:[c.lW,d.Hw,m.O5,u.PQ,g.N8],styles:[""]}),t})()}}]);