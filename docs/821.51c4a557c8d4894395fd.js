(self.webpackChunkwachatpro_webclient=self.webpackChunkwachatpro_webclient||[]).push([[821],{1520:(e,t,o)=>{"use strict";o.d(t,{q:()=>r});var n=o(39895),i=o(14058),a=(o(67469),o(17947),o(68452),o(37716));const s=[{path:"",children:[{path:"list",component:i.r},{path:"group",component:i.r},{path:"**",redirectTo:"/contacts/list"}]}];let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.Bz.forChild(s)],n.Bz]}),e})()},14058:(e,t,o)=>{"use strict";o.d(t,{r:()=>h});var n=o(79765),i=o(37716),a=o(42448),s=o(39895),r=o(68452),l=o(71386),c=o(38583),u=o(17947),d=o(67469);function g(e,t){1&e&&i._UZ(0,"contact-list")}function p(e,t){1&e&&i._UZ(0,"contact-group")}let h=(()=>{class e{constructor(e,t){this.core=e,this.router=t,this._unsubscribeAll=new n.xQ,this.Path="list","/contacts/group"==this.router.url&&(this.Path="group")}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}Reload(){}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.Q),i.Y36(s.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-contact"]],decls:6,vars:2,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex","flex-auto","flex-row","bg-gray-50"],[1,"min-w-60","bg-gray-200","light","pt-8","-m-3x"],["cdkScrollable","",1,"flex-auto","p-0","sm:p-0","overflow-y-auto"],[4,"ngIf"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"contact-menu",2),i.TgZ(3,"div",3),i.YNc(4,g,1,0,"contact-list",4),i.YNc(5,p,1,0,"contact-group",4),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(4),i.Q6J("ngIf","list"===t.Path),i.xp6(1),i.Q6J("ngIf","group"===t.Path))},directives:[r.I,l.PQ,c.O5,u.E,d.r],styles:[""]}),e})()},81821:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ContactModule:()=>u});var n=o(38583),i=o(1520),a=o(44466),s=o(49616),r=o(571),l=o(48526),c=o(37716);o(14058),o(68452),o(17947),o(67469);let u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[n.ez,i.q,a.m,s.m,r.sF.withComponents([]),l.PU]]}),e})()},67469:(e,t,o)=>{"use strict";o.d(t,{r:()=>u});var n=o(37716),i=o(42448),a=o(51095),s=o(76627),r=o(38583),l=o(571);function c(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ag-grid-angular",7),n.NdJ("gridReady",function(t){return n.CHM(e),n.oxw().onGridReady(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("columnDefs",e.TableCol)("getContextMenuItems",e.getContextMenuItems)("defaultColDef",e.gridOptions.defaultColDef)("context",e.gridOptions.context)("animateRows",e.gridOptions.animateRows)("allowContextMenuWithControlKey",e.gridOptions.allowContextMenuWithControlKey)("rowModelType","infinite")("rowBuffer",0)("debug",e.gridOptions.debug)("rowSelection",e.gridOptions.rowSelection)("cacheOverflowSize",e.gridOptions.cacheOverflowSize)("maxConcurrentDatasourceRequests",2)("paginationPageSize",100)("infiniteInitialRowCount",100)("cacheBlockSize",e.gridOptions.cacheBlockSize)("maxBlocksInCache",2)("components",e.components)("tooltipShowDelay",10)}}let u=(()=>{class e{constructor(e){this.core=e,this.Com={url:"e/contacts/",id:"contact.group",name:"Broadcast Target"},this.Name={target:"target-list",contact:"contact-list"},this.Ready=!1,this.Default={},this.form={},this.Busy=!1,this.Data=[],this.components={loadingCellRenderer:function(e){return void 0!==e.value?e.value:'\n                    <svg \n                        class="animate-spin text-primary h-4 w-4 mt-1"\n                        xmlns="http://www.w3.org/2000/svg" \n                        fill="none" \n                        viewBox="0 0 24 24"\n                    >\n                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n                    </svg>\n                    '}}}ngOnInit(){this.core.setTitle(this.Com.name)}Reload(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.Q))},e.\u0275cmp=n.Xpm({type:e,selectors:[["contact-group"]],decls:8,vars:2,consts:[[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pt-2","pb-2","pr-8","bg-gray-200","dark:bg-transparent"],[1,"flex-1","min-w-0"],["mat-flat-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],[1,"flex","flex-shrink-0","items-center","mt-2","sm:mt-0","sm:ml-0"],[2,"height","calc(100% - 57px)"],["class","grid-class ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","paginationPageSize","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","components","tooltipShowDelay","gridReady",4,"ngIf"],[1,"grid-class","ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","paginationPageSize","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","components","tooltipShowDelay","gridReady"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"button",2),n.NdJ("click",function(){return t.Reload()}),n._UZ(3,"mat-icon",3),n._uU(4," Reload Data "),n.qZA(),n.qZA(),n._UZ(5,"div",4),n.qZA(),n.TgZ(6,"div",5),n.YNc(7,c,1,18,"ag-grid-angular",6),n.qZA()),2&e&&(n.xp6(3),n.Q6J("svgIcon","heroicons_outline:refresh"),n.xp6(4),n.Q6J("ngIf",t.Ready))},directives:[a.lW,s.Hw,r.O5,l.N8],encapsulation:2}),e})()},17947:(e,t,o)=>{"use strict";o.d(t,{E:()=>h});var n=o(23815),i=o.n(n),a=o(16738),s=o.n(a),r=o(37716),l=o(42448),c=o(51095),u=o(76627),d=o(38583),g=o(571);function p(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"ag-grid-angular",7),r.NdJ("gridReady",function(t){return r.CHM(e),r.oxw().onGridReady(t)}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("columnDefs",e.TableCol)("getContextMenuItems",e.getContextMenuItems)("defaultColDef",e.gridOptions.defaultColDef)("context",e.gridOptions.context)("animateRows",e.gridOptions.animateRows)("allowContextMenuWithControlKey",e.gridOptions.allowContextMenuWithControlKey)("rowModelType","infinite")("rowBuffer",0)("debug",e.gridOptions.debug)("rowSelection",e.gridOptions.rowSelection)("cacheOverflowSize",e.gridOptions.cacheOverflowSize)("maxConcurrentDatasourceRequests",2)("paginationPageSize",100)("infiniteInitialRowCount",100)("cacheBlockSize",e.gridOptions.cacheBlockSize)("maxBlocksInCache",2)("components",e.components)("tooltipShowDelay",10)}}let h=(()=>{class e{constructor(e){this.core=e,this.Com={url:"e/contacts/",id:"app.contact",name:"Contact List"},this.Ready=!1,this.Default={},this.form={},this.Busy=!1,this.Data=[],this.gridFilter="{}",this.gridSort="[]",this.gridFiltered=!1,this.gridSorted=!1,this.TableCol=[{headerName:"Name",field:"name",tooltipField:"name",width:300,suppressSizeToFit:!0,filterParams:{filterOptions:["contains"],suppressAndOrCondition:!1},cellRenderer:"loadingCellRenderer"},{headerName:"Number",field:"number",suppressSizeToFit:!0,width:175,filterParams:{filterOptions:["contains"],suppressAndOrCondition:!1},cellRenderer:"loadingCellRenderer"}],this.components={loadingCellRenderer:function(e){return void 0!==e.value?e.value:'\n                    <svg \n                        class="animate-spin text-primary h-4 w-4 mt-1"\n                        xmlns="http://www.w3.org/2000/svg" \n                        fill="none" \n                        viewBox="0 0 24 24"\n                    >\n                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n                    </svg>\n                    '}}}ngOnInit(){this.core.setTitle(this.Com.name),this.core.loadDefault({url:this.Com.url,id:this.Com.id}).then(e=>{e&&(this.Default=e,e.perm_hash&&(this.perm=e.perm_hash)),this.Ready=!0})}ngAfterViewInit(){this.gridOptions=this.core.getGridOptions(),this.gridOptions.context={parent:this}}Reload(){this.loadData(this.gridParams,!0)}loadData(e={},t=!1){var o={url:this.Com.url,id:this.Com.id};this.gridFilter&&"{}"!=this.gridFilter&&(o.filter=this.gridFilter),this.gridSort&&"[]"!=this.gridSort&&(o.sort=this.gridSort);let n="contact-list";this.core.getStorage({id:n,isjson:!0}).then(o=>{o&&!t?this.processData(e,o):this.core.Do(this.Com.url+"data",{}).subscribe(t=>{if(t&&1==t.status){if(t.kontak&&t.kontak.length>0){let o=[];for(let e of t.kontak)if(e.data){let t=JSON.parse(e.data);o=[...o,...t]}if(o.length>0){let t=[...i().orderBy(i().filter(o,e=>{let t,o;return e.name&&(t=e.name.replace(/[\W_]+/g,"")),e.number&&(o=e.number.replace(/[\W_]+/g,"")),t&&t!=o}),["name"],["asc"]),...i().orderBy(i().filter(o,e=>{let t,o;return e.name&&(t=e.name.replace(/[\W_]+/g,"")),e.number&&(o=e.number.replace(/[\W_]+/g,"")),!t||t==o}),["name"],["asc"])];t=i().uniqBy(t,"number");let a={stamp:s()(),data:t};this.core.setStorage({id:n,isjson:!0},a).then(()=>{this.processData(e,a)})}}}else e.fail()},t=>{e.fail()})})}processData(e,t){let o=t.data;e.api.setDatasource({rowCount:null,getRows:e=>{setTimeout(()=>{let t=JSON.parse(JSON.stringify(o));if(Object.keys(e.filterModel).length>0||Object.keys(e.sortModel).length>0){if(Object.keys(e.sortModel).length>0){let o=[],n=[];for(let t of e.sortModel)o.push(t.colId),n.push(t.sort);t=i().orderBy(t,o,n)}if(Object.keys(e.filterModel).length>0)for(let o in e.filterModel)t=this.core.Search(t,e.filterModel[o].filter)}let n=t,a=n.slice(e.startRow,e.endRow),s=-1;n.length<=e.endRow&&(s=n.length),e.successCallback(a,s)},100)}})}openForm(e){this.showDialog(e)}showDialog(e){}onGridReady(e){this.gridParams=e,this.gridApi=e.api,e.api.sizeColumnsToFit(),this.loadData(e)}onDoubleClick(e){this.openForm("detail-"+e.data.id)}getContextMenuItems(e){var t=[],o=e.context.parent;t.push({name:o.core.translatePipe("contact.menu.toGroup"),action:()=>{},icon:'\n                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />\n                </svg>\n            ',cssClasses:[]}),t.push({name:o.core.translatePipe("contact.menu.sendMessage"),action:()=>{},icon:'\n                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><title>Logo Whatsapp</title><path d="M414.73 97.1A222.14 222.14 0 00256.94 32C134 32 33.92 131.58 33.87 254a220.61 220.61 0 0029.78 111L32 480l118.25-30.87a223.63 223.63 0 00106.6 27h.09c122.93 0 223-99.59 223.06-222A220.18 220.18 0 00414.73 97.1zM256.94 438.66h-.08a185.75 185.75 0 01-94.36-25.72l-6.77-4-70.17 18.32 18.73-68.09-4.41-7A183.46 183.46 0 0171.53 254c0-101.73 83.21-184.5 185.48-184.5a185 185 0 01185.33 184.64c-.04 101.74-83.21 184.52-185.4 184.52zm101.69-138.19c-5.57-2.78-33-16.2-38.08-18.05s-8.83-2.78-12.54 2.78-14.4 18-17.65 21.75-6.5 4.16-12.07 1.38-23.54-8.63-44.83-27.53c-16.57-14.71-27.75-32.87-31-38.42s-.35-8.56 2.44-11.32c2.51-2.49 5.57-6.48 8.36-9.72s3.72-5.56 5.57-9.26.93-6.94-.46-9.71-12.54-30.08-17.18-41.19c-4.53-10.82-9.12-9.35-12.54-9.52-3.25-.16-7-.2-10.69-.2a20.53 20.53 0 00-14.86 6.94c-5.11 5.56-19.51 19-19.51 46.28s20 53.68 22.76 57.38 39.3 59.73 95.21 83.76a323.11 323.11 0 0031.78 11.68c13.35 4.22 25.5 3.63 35.1 2.2 10.71-1.59 33-13.42 37.63-26.38s4.64-24.06 3.25-26.37-5.11-3.71-10.69-6.48z" fill-rule="evenodd"/></svg>\n            ',cssClasses:[]});var n=t;return t.length<=0&&(n=!1),n}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.Q))},e.\u0275cmp=r.Xpm({type:e,selectors:[["contact-list"]],decls:8,vars:2,consts:[[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pt-2","pb-2","pr-8","bg-gray-200","dark:bg-transparent"],[1,"flex-1","min-w-0"],["mat-flat-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],[1,"flex","flex-shrink-0","items-center","mt-2","sm:mt-0","sm:ml-0"],[2,"height","calc(100% - 57px)"],["class","grid-class ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","paginationPageSize","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","components","tooltipShowDelay","gridReady",4,"ngIf"],[1,"grid-class","ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","paginationPageSize","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","components","tooltipShowDelay","gridReady"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"button",2),r.NdJ("click",function(){return t.Reload()}),r._UZ(3,"mat-icon",3),r._uU(4," Reload Data "),r.qZA(),r.qZA(),r._UZ(5,"div",4),r.qZA(),r.TgZ(6,"div",5),r.YNc(7,p,1,18,"ag-grid-angular",6),r.qZA()),2&e&&(r.xp6(3),r.Q6J("svgIcon","heroicons_outline:refresh"),r.xp6(4),r.Q6J("ngIf",t.Ready))},directives:[c.lW,u.Hw,d.O5,g.N8],encapsulation:2}),e})()},68452:(e,t,o)=>{"use strict";o.d(t,{I:()=>s});var n=o(37716),i=o(42448),a=o(29551);let s=(()=>{class e{constructor(e){this.core=e,this.menuData=[{id:"contact",title:"Contacts",subtitle:"Select menu below",type:"group",children:[{id:"contact.list",title:"Contact List",type:"basic",icon:"heroicons_outline:user-circle",link:"/contacts/list"},{id:"contact.group",title:"Target Broadcast",type:"basic",icon:"heroicons_outline:user-group",link:"/contacts/group"}]}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.Q))},e.\u0275cmp=n.Xpm({type:e,selectors:[["contact-menu"]],decls:1,vars:5,consts:[[1,"z-0",3,"navigation","inner","mode","name","opened"]],template:function(e,t){1&e&&n._UZ(0,"fuse-vertical-navigation",0),2&e&&n.Q6J("navigation",t.menuData)("inner",!0)("mode","side")("name","contact-menu")("opened",!0)},directives:[a.j],encapsulation:2}),e})()}}]);