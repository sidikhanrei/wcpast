(self.webpackChunkwachatpro_webclient=self.webpackChunkwachatpro_webclient||[]).push([[592],{17483:(t,e,r)=>{"use strict";r.d(e,{fC:()=>s.fC});var s=r(99849)},99849:(t,e,r)=>{"use strict";r.d(e,{fC:()=>s.f}),r(98214);var s=r(66951)},19602:(t,e,r)=>{"use strict";r(28288)},33564:(t,e,r)=>{"use strict";r.d(e,{J:()=>a});var s=r(38583),i=r(37716);let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[s.ez]]}),t})()},25553:(t,e,r)=>{"use strict";r.d(e,{J:()=>s.J});var s=r(18421)},18421:(t,e,r)=>{"use strict";r.d(e,{J:()=>s.J}),r(19602);var s=r(33564)},14485:(t,e,r)=>{"use strict";r.d(e,{a:()=>s});class s{static isEmptyInputValue(t){return null==t||0===t.length}static mustMatch(t,e){return r=>{const s=r.get(t),i=r.get(e);if(!s||!i)return null;if(i.hasError("mustMatch")&&(delete i.errors.mustMatch,i.updateValueAndValidity()),this.isEmptyInputValue(i.value)||s.value===i.value)return null;const a={mustMatch:!0};return i.setErrors(a),a}}}},83105:(t,e,r)=>{"use strict";r.d(e,{a:()=>f});var s=r(91841),i=r(25917),a=r(60134),n=r(74945),o=r(5304),c=r(88002),u=r(37716),h=r(42448),l=r(49670),d=r(39895),p=r(24116);let f=(()=>{class t{constructor(t,e,r,s,i){this.core=t,this.http=e,this.config=r,this.router=s,this.storage=i,this.StorageName="Checkpoint",this.dataCheckpoint=[]}canActivate(t,e){this.ID=t.data.id;var r=this.core.Base65Encode(this.ID,this.config.identity);return new Promise(t=>{this.storage.get(this.StorageName).subscribe(s=>this.check(s).subscribe(s=>{if(s)return t(s),!1;this.storage.get(this.StorageName).subscribe(t=>{t&&(this.dataCheckpoint=t),this.dataCheckpoint.push(r),this.storage.set(this.StorageName,this.dataCheckpoint).subscribe()});var i=this.core.dataState;if(i)return this.afterCanActivate(i,e).subscribe(e=>{t(e)});var a=this.core.getState();if(a)return this.core.dataState=a.toString(),this.afterCanActivate(this.core.dataState,e).subscribe(e=>{t(e)});console.log("No Permission"),this.core.clearData();var n=e.url;return("/sign-in"==n||n.indexOf("/scan/")>-1)&&(n=null),this.router.navigate(["sign-in"],{queryParams:{redirectURL:n}}),t(!1),!1}))})}afterCanActivate(t,e){if(t){var r=this.core.Separator(),u=r,h=(u=u.toString()).substr(0,8);h+=u.substr(-8);var l=JSON.parse(JSON.stringify({ses:this.ID}));Object.keys(l).map(t=>{var e=encodeURIComponent(this.core.Base65Encode(l[t],h)),r=l[t];null!==r&&""!=r&&(r.length>5&&"NE---"==(r=r.toString()).substr(0,5)&&(e=encodeURIComponent(l[t])),l[this.core.Base65Encode(t,h)]=e),delete l[t]});let e={headers:(new s.WM).set("Accept","application/json").set("Content-Type","application/x-www-form-urlencoded;"+r+";"+t)};return this.http.post(this.config.host+"/server",this.core.formData(l),e).pipe((0,a.V)(this.config.timeout),(0,n.X)(this.config.retry),(0,o.K)(t=>(0,i.of)(null)),(0,c.U)(t=>"online"==t.status||(this.router.navigate(["error-403"]),this.core.OpenAlert({type:"error",showConfirmButton:!1,title:"Permissions Denied!",msg:"You can not open the page, please contact Administrator!"}),!1)))}console.log("Auth Guard No State");var d=e.url;return("/sign-in"==d||d.indexOf("/scan/")>-1)&&(d=null),this.router.navigate(["sign-in"],{queryParams:{redirectURL:d}}),(0,i.of)(!1)}check(t,e=0){if(t){var r=e+1,s=this.core.Base65Decode(t[e],this.config.identity);return Number(s)===Number(this.ID)?(0,i.of)(!0):t[r]?this.check(t,r):(0,i.of)(!1)}return(0,i.of)(!1)}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(h.Q),u.LFG(s.eN),u.LFG(l.De),u.LFG(d.F0),u.LFG(p.BU))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);