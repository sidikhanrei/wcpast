(self.webpackChunkwachatpro_webclient=self.webpackChunkwachatpro_webclient||[]).push([[8],{71268:(e,t,i)=>{"use strict";i.d(t,{q:()=>a});var o=i(29996),n=i(48348),s=i(35366);const r=[{path:"",children:[{path:"",component:n.r}]}];let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.Bz.forChild(r)],o.Bz]}),e})()},48348:(e,t,i)=>{"use strict";i.d(t,{r:()=>C});var o=i(55959),n=i(78194),s=i.n(n),r=i(29609),a=i.n(r),l=i(35366),c=i(4489),d=i(67595),h=i(92935),u=i(84369),m=i(77307),p=i(10083),g=i(61116),f=i(68001);function w(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"ag-grid-angular",8),l.NdJ("gridReady",function(t){return l.CHM(e),l.oxw().onGridReady(t)}),l.qZA()}if(2&e){const e=l.oxw();l.Q6J("columnDefs",e.TableCol)("getContextMenuItems",e.getContextMenuItems)("defaultColDef",e.gridOptions.defaultColDef)("context",e.gridOptions.context)("animateRows",e.gridOptions.animateRows)("allowContextMenuWithControlKey",e.gridOptions.allowContextMenuWithControlKey)("rowModelType","infinite")("rowBuffer",0)("debug",e.gridOptions.debug)("rowSelection",e.gridOptions.rowSelection)("cacheOverflowSize",e.gridOptions.cacheOverflowSize)("maxConcurrentDatasourceRequests",2)("paginationPageSize",100)("infiniteInitialRowCount",100)("cacheBlockSize",e.gridOptions.cacheBlockSize)("maxBlocksInCache",2)("components",e.components)}}let C=(()=>{class e{constructor(e,t,i){this.core=e,this.dataService=t,this.dialog=i,this._unsubscribeAll=new o.xQ,this.Ready=!1,this.Default={},this.form={},this.Busy=!1,this.Data=[],this.Com={url:"e/contacts/",id:"app.contact",name:"Contacts"},this.gridFilter="{}",this.gridSort="[]",this.gridFiltered=!1,this.gridSorted=!1,this.TableCol=[{headerName:"Name",field:"name",tooltipField:"name",width:300,suppressSizeToFit:!0,filterParams:{filterOptions:["contains"],suppressAndOrCondition:!1},cellRenderer:"loadingCellRenderer"},{headerName:"Number",field:"number",suppressSizeToFit:!0,width:175,filterParams:{filterOptions:["contains"],suppressAndOrCondition:!1},cellRenderer:"loadingCellRenderer"}],this.components={loadingCellRenderer:function(e){return void 0!==e.value?e.value:'\n                    <svg \n                        class="animate-spin text-primary h-4 w-4 mt-1"\n                        xmlns="http://www.w3.org/2000/svg" \n                        fill="none" \n                        viewBox="0 0 24 24"\n                    >\n                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n                    </svg>\n                    '}}}ngOnInit(){this.core.setTitle(this.Com.name),this.core.loadDefault({url:this.Com.url,id:this.Com.id}).then(e=>{e&&(this.Default=e,e.perm_hash&&(this.perm=e.perm_hash)),this.Ready=!0})}ngAfterViewInit(){this.gridOptions=this.core.getGridOptions(),this.gridOptions.context={parent:this}}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}Reload(){this.loadData(this.gridParams,!0)}ResetFilter(){}loadData(e={},t=!1){var i={url:this.Com.url,id:this.Com.id};this.gridFilter&&"{}"!=this.gridFilter&&(i.filter=this.gridFilter),this.gridSort&&"[]"!=this.gridSort&&(i.sort=this.gridSort);let o="contact-list";this.core.getStorage({id:o,isjson:!0}).then(i=>{i&&!t?this.processData(e,i):this.core.Do(this.Com.url+"data",{}).subscribe(t=>{if(t&&1==t.status){if(t.kontak&&t.kontak.length>0){let i=[];for(let e of t.kontak)if(e.data){let t=JSON.parse(e.data);i=[...i,...t]}if(i.length>0){let t=[...s().orderBy(s().filter(i,e=>{let t,i;return e.name&&(t=e.name.replace(/[\W_]+/g,"")),e.number&&(i=e.number.replace(/[\W_]+/g,"")),t&&t!=i}),["name"],["asc"]),...s().orderBy(s().filter(i,e=>{let t,i;return e.name&&(t=e.name.replace(/[\W_]+/g,"")),e.number&&(i=e.number.replace(/[\W_]+/g,"")),!t||t==i}),["name"],["asc"])];t=s().uniqBy(t,"number");let n={stamp:a()(),data:t};this.core.setStorage({id:o,isjson:!0},n).then(()=>{this.processData(e,n)})}}}else e.fail()},t=>{e.fail()})})}processData(e,t){let i=t.data;e.api.setDatasource({rowCount:null,getRows:e=>{setTimeout(()=>{let t=JSON.parse(JSON.stringify(i));if(Object.keys(e.filterModel).length>0||Object.keys(e.sortModel).length>0){if(Object.keys(e.sortModel).length>0){let i=[],o=[];for(let t of e.sortModel)i.push(t.colId),o.push(t.sort);t=s().orderBy(t,i,o)}if(Object.keys(e.filterModel).length>0)for(let i in e.filterModel)t=this.core.Search(t,e.filterModel[i].filter)}let o=t,n=o.slice(e.startRow,e.endRow),r=-1;o.length<=e.endRow&&(r=o.length),e.successCallback(n,r)},100)}})}openForm(e){this.showDialog(e)}showDialog(e){}onGridReady(e){this.gridParams=e,this.gridApi=e.api,e.api.sizeColumnsToFit(),this.loadData(e)}onDoubleClick(e){this.openForm("detail-"+e.data.id)}getContextMenuItems(e){var t=[],i=e.context.parent;t.push({name:i.core.translatePipe("contact.menu.toGroup"),action:()=>{},icon:'\n                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />\n                </svg>\n            ',cssClasses:[]}),t.push({name:i.core.translatePipe("contact.menu.sendMessage"),action:()=>{},icon:'\n                <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512"><title>Logo Whatsapp</title><path d="M414.73 97.1A222.14 222.14 0 00256.94 32C134 32 33.92 131.58 33.87 254a220.61 220.61 0 0029.78 111L32 480l118.25-30.87a223.63 223.63 0 00106.6 27h.09c122.93 0 223-99.59 223.06-222A220.18 220.18 0 00414.73 97.1zM256.94 438.66h-.08a185.75 185.75 0 01-94.36-25.72l-6.77-4-70.17 18.32 18.73-68.09-4.41-7A183.46 183.46 0 0171.53 254c0-101.73 83.21-184.5 185.48-184.5a185 185 0 01185.33 184.64c-.04 101.74-83.21 184.52-185.4 184.52zm101.69-138.19c-5.57-2.78-33-16.2-38.08-18.05s-8.83-2.78-12.54 2.78-14.4 18-17.65 21.75-6.5 4.16-12.07 1.38-23.54-8.63-44.83-27.53c-16.57-14.71-27.75-32.87-31-38.42s-.35-8.56 2.44-11.32c2.51-2.49 5.57-6.48 8.36-9.72s3.72-5.56 5.57-9.26.93-6.94-.46-9.71-12.54-30.08-17.18-41.19c-4.53-10.82-9.12-9.35-12.54-9.52-3.25-.16-7-.2-10.69-.2a20.53 20.53 0 00-14.86 6.94c-5.11 5.56-19.51 19-19.51 46.28s20 53.68 22.76 57.38 39.3 59.73 95.21 83.76a323.11 323.11 0 0031.78 11.68c13.35 4.22 25.5 3.63 35.1 2.2 10.71-1.59 33-13.42 37.63-26.38s4.64-24.06 3.25-26.37-5.11-3.71-10.69-6.48z" fill-rule="evenodd"/></svg>\n            ',cssClasses:[]});var o=t;return t.length<=0&&(o=!1),o}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(c.Q),l.Y36(d.D),l.Y36(h.uw))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-contact"]],decls:9,vars:2,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pt-2","pb-2","pr-8","pl-6","bg-grey","dark:bg-transparent"],[1,"flex-1","min-w-0"],["mat-flat-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],[1,"flex","flex-shrink-0","items-center","mt-2","sm:mt-0","sm:ml-0"],["cdkScrollable","",1,"flex-auto","p-0","sm:p-0","overflow-y-auto"],["class","grid-class ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","paginationPageSize","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","components","gridReady",4,"ngIf"],[1,"grid-class","ag-theme-alpine",3,"columnDefs","getContextMenuItems","defaultColDef","context","animateRows","allowContextMenuWithControlKey","rowModelType","rowBuffer","debug","rowSelection","cacheOverflowSize","maxConcurrentDatasourceRequests","paginationPageSize","infiniteInitialRowCount","cacheBlockSize","maxBlocksInCache","components","gridReady"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"button",3),l.NdJ("click",function(){return t.Reload()}),l._UZ(4,"mat-icon",4),l._uU(5," Reload Data "),l.qZA(),l.qZA(),l._UZ(6,"div",5),l.qZA(),l.TgZ(7,"div",6),l.YNc(8,w,1,17,"ag-grid-angular",7),l.qZA(),l.qZA()),2&e&&(l.xp6(4),l.Q6J("svgIcon","heroicons_outline:refresh"),l.xp6(4),l.Q6J("ngIf",t.Ready))},directives:[u.lW,m.Hw,p.PQ,g.O5,f.N8],styles:[""]}),e})()},95736:(e,t,i)=>{"use strict";i.r(t),i.d(t,{ContactModule:()=>c});var o=i(61116),n=i(71268),s=i(75425),r=i(56409),a=i(68001),l=i(35366);i(48348);let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.ez,n.q,s.m,r.m,a.sF.withComponents([])]]}),e})()}}]);