(self.webpackChunkwachatpro_webclient=self.webpackChunkwachatpro_webclient||[]).push([[592],{17483:(t,e,r)=>{"use strict";r.d(e,{fC:()=>s.fC});var s=r(99849)},99849:(t,e,r)=>{"use strict";r.d(e,{fC:()=>s.f}),r(98214);var s=r(66951)},19602:(t,e,r)=>{"use strict";r(28288)},33564:(t,e,r)=>{"use strict";r.d(e,{J:()=>i});var s=r(38583),a=r(37716);let i=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[s.ez]]}),t})()},25553:(t,e,r)=>{"use strict";r.d(e,{J:()=>s.J});var s=r(18421)},18421:(t,e,r)=>{"use strict";r.d(e,{J:()=>s.J}),r(19602);var s=r(33564)},14485:(t,e,r)=>{"use strict";r.d(e,{a:()=>s});class s{static isEmptyInputValue(t){return null==t||0===t.length}static mustMatch(t,e){return r=>{const s=r.get(t),a=r.get(e);if(!s||!a)return null;if(a.hasError("mustMatch")&&(delete a.errors.mustMatch,a.updateValueAndValidity()),this.isEmptyInputValue(a.value)||s.value===a.value)return null;const i={mustMatch:!0};return a.setErrors(i),i}}}},83105:(t,e,r)=>{"use strict";r.d(e,{a:()=>f});var s=r(91841),a=r(25917),i=r(60134),o=r(74945),n=r(5304),c=r(88002),u=r(37716),h=r(42448),d=r(49670),l=r(39895),g=r(24116);let f=(()=>{class t{constructor(t,e,r,s,a){this.core=t,this.http=e,this.config=r,this.router=s,this.storage=a,this.StorageName="Checkpoint",this.dataCheckpoint=[]}canActivate(t,e){this.ID=t.data.id;var r=this.core.Base65Encode(this.ID,this.config.identity);return new Promise(t=>{this.storage.get(this.StorageName).subscribe(s=>this.check(s).subscribe(s=>{if(s)return t(s),!1;this.storage.get(this.StorageName).subscribe(t=>{t&&(this.dataCheckpoint=t),this.dataCheckpoint.push(r),this.storage.set(this.StorageName,this.dataCheckpoint).subscribe()});var a=this.core.dataState;if(a)return this.afterCanActivate(a,e).subscribe(e=>{t(e)});var i=this.core.getState();if(i)return this.core.dataState=i.toString(),this.afterCanActivate(this.core.dataState,e).subscribe(e=>{t(e)});console.log("No Permission"),this.core.clearData();var o=e.url;return"/sign-in"==o&&(o=null),this.router.navigate(["sign-in"],{queryParams:{redirectURL:o}}),t(!1),!1}))})}afterCanActivate(t,e){if(t){var r=this.core.Separator(),u=r,h=(u=u.toString()).substr(0,8);h+=u.substr(-8);var d=JSON.parse(JSON.stringify({ses:this.ID}));Object.keys(d).map(t=>{var e=encodeURIComponent(this.core.Base65Encode(d[t],h)),r=d[t];null!==r&&""!=r&&(r.length>5&&"NE---"==(r=r.toString()).substr(0,5)&&(e=encodeURIComponent(d[t])),d[this.core.Base65Encode(t,h)]=e),delete d[t]});let e={headers:(new s.WM).set("Accept","application/json").set("Content-Type","application/x-www-form-urlencoded;"+r+";"+t)};return this.http.post(this.config.host+"/server",this.core.formData(d),e).pipe((0,i.V)(this.config.timeout),(0,o.X)(this.config.retry),(0,n.K)(t=>(0,a.of)(null)),(0,c.U)(t=>"online"==t.status||(this.router.navigate(["error-403"]),this.core.OpenAlert({type:"error",showConfirmButton:!1,title:"Permissions Denied!",msg:"You can not open the page, please contact Administrator!"}),!1)))}console.log("Auth Guard No State");var l=e.url;return"/sign-in"==l&&(l=null),this.router.navigate(["sign-in"],{queryParams:{redirectURL:l}}),(0,a.of)(!1)}check(t,e=0){if(t){var r=e+1,s=this.core.Base65Decode(t[e],this.config.identity);return Number(s)===Number(this.ID)?(0,a.of)(!0):t[r]?this.check(t,r):(0,a.of)(!1)}return(0,a.of)(!1)}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(h.Q),u.LFG(s.eN),u.LFG(d.De),u.LFG(l.F0),u.LFG(g.BU))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},15362:(t,e,r)=>{"use strict";r.d(e,{D:()=>o});var s=r(37716),a=r(42448),i=r(49670);let o=(()=>{class t{constructor(t,e){this.core=t,this.config=e,this.Data=[],this.gridBusy=!1}loadStorage(t={}){return new Promise(e=>{if(Object.keys(t).length>0)if(t.id){var r="data."+t.id;this.Data[r]?e(this.Data[r]):this.core.getStorage({id:r}).then(t=>{t&&(this.Data[r]=t,e(t))})}else e({status:0,error_msg:"Please define the Config.id"});else e({status:0,error_msg:"Please define Config"})})}loadData(t={}){return new Promise(e=>{if(Object.keys(t).length>0){if(t.id)return this.core.Do(t.url+"data",t.params).subscribe(r=>{this.Data["data."+t.id]=r,e(r)},t=>{console.log("Error Load Data",t),e(t)});e({status:0,error_msg:"Please define the Config.id"})}else e({status:0,error_msg:"Please define Config"})})}gridGetDatasource(t,e){var r=this;return{getRows:function(t){if(!r.gridBusy){r.gridBusy=!0;var s=t.request.endRow;e.params={offset:t.request.startRow,limit:r.config.gridLimit,NoLoader:!0},r.loadStorage(e).then(e=>{console.log(e);var a=-1,i=[];e.data?(i=e.data,e.count<=s&&(a=e.count)):a=e.count,t.successCallback(i,a),r.gridBusy=!1})}}}}gridLoadDatasource(t,e){var r=this;return{getRows:function(t){if(!r.gridBusy){r.gridBusy=!0;var s={offset:t.request.startRow,limit:r.config.gridLimit,NoLoader:!0};e.filter&&(s.ftable=e.filter),e.sort&&(s.stable=e.sort),e.params=Object.assign(Object.assign({},e.params),s),r.loadData(e).then(e=>{e&&e.data?t.success({rowData:e.data,rowCount:e.count}):t.fail(),r.gridBusy=!1})}}}}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(a.Q),s.LFG(i.De))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);